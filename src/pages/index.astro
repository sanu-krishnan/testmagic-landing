---
import Layout from "../layouts/Layout.astro";
import Background from "../components/Background.vue";
import HeroSection from "../components/HeroSection.astro";
import HowItWorks from "../components/HowItWorks.astro";

// Client-side redirect to www if coming from apex domain
if (Astro.request.headers.get("host") === "testmagic.io") {
  return Astro.redirect(
    "https://www.testmagic.io" +
      Astro.url.pathname +
      Astro.url.search +
      Astro.url.hash,
    301
  );
}
---

<Layout title="TestMagic - AI for API & Backend Testing">
  <Background>
    <main
      class="relative min-h-[100dvh] overflow-y-scroll scrollbar-none w-full flex flex-col h-full z-10"
    >
      <nav class="py-4 sm:py-6 px-1 sm:px-8">
        <img src="testmagic-logo.svg" alt="TestMagic Logo" class="h-9" />
      </nav>
      <HeroSection />
      <HowItWorks />
    </main>
  </Background>
</Layout>
